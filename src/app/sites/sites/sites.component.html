<div class="om-sites">
    <div>
        <h2>My Sites</h2>
    </div>

    <mat-paginator
        [length]="totalCount"
        [(pageSize)]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="currentPage"
        showFirstLastButtons="true"
        (page)=onPageChanged($event)>
    </mat-paginator>
    
    <mat-table
        [dataSource]="items"
        class="mat-elevation-z8">

        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
            <mat-cell *matCellDef="let site">{{site.name}}</mat-cell>
        </ng-container>
        
        <ng-container matColumnDef="timezone">
            <mat-header-cell *matHeaderCellDef>Timezone</mat-header-cell>
            <mat-cell *matCellDef="let site">{{site.timezone}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="latitude">
            <mat-header-cell *matHeaderCellDef>Geographical Latitude</mat-header-cell>
            <mat-cell *matCellDef="let site">{{ site.coord.latitude | degreesFormatter }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="longitude">
            <mat-header-cell *matHeaderCellDef>Geographical Longitude</mat-header-cell>
            <mat-cell *matCellDef="let site">{{ site.coord.longitude | degreesFormatter }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="elevation">
            <mat-header-cell *matHeaderCellDef>Elevation (m)</mat-header-cell>
            <mat-cell *matCellDef="let site">{{site.elevation | number}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="code">
            <mat-header-cell *matHeaderCellDef>IAU Code</mat-header-cell>
            <mat-cell *matCellDef="let site">{{site.code}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
            <mat-cell *matCellDef="let site">
                <button mat-icon-button
                        routerLink="/sites/{{site.id}}">
                        <mat-icon
                            aria-label="Click to edit">
                            edit
                        </mat-icon>
                </button>
                <button mat-icon-button
                    (click)=remove(site)>
                        <mat-icon
                            aria-label="Click to delete">
                            delete
                        </mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

    </mat-table>

    <mat-paginator
        [length]="totalCount"
        [(pageSize)]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="currentPage"
        showFirstLastButtons="true"
        (page)=onPageChanged($event)>
    </mat-paginator>
    
    <hr />
    <div>
        <button 
            mat-button
            color="primary"
            routerLink="/sites/new-site"
            color="primary">Add New Site</button>

        <button
            mat-button
            routerLink="/">Back to Main Page</button>
        
    </div>

</div>