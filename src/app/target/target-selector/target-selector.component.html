<div class="om-target-selector">

    <mat-form-field>
        
        <input
            type="text"
            placeholder="Target"
            aria-label="Number"
            matInput
            [formControl]="searhControl"
            [matAutocomplete]="auto"
            (keyup)="search(searhControl.value)">

        <mat-autocomplete
            #auto="matAutocomplete"
            [displayWith]="displayFn"
            (optionSelected)="onTargetSelected(searhControl.value)">
            <mat-option
                *ngFor="let trgt of targets$ | async"
                [value]="trgt">
            {{trgt.name}}
            </mat-option>
        </mat-autocomplete>

        <button
            mat-button
            matSuffix
            mat-icon-button
            aria-label="Clear"
            matTooltip="Clear"
            (click)="clearSelection()"
            *ngIf="target && target.id">
            <mat-icon>close</mat-icon>
        </button>

    </mat-form-field>

    <button
        *ngIf="canAdd"
        mat-button
        mat-icon-button
        (click)="openDialog()">
        <mat-icon>add</mat-icon>
    </button>

</div>